require File.join(File.dirname(__FILE__), '<%= '../' * const.nesting_depth %>tap_test_helper.rb') 
require '<%= const.path %>'
require 'tap/generator/preview.rb'

class <%= const.name %>Test < Test::Unit::TestCase

  # Preview fakes out a generator for testing
  Preview = Tap::Generator::Preview
  
  acts_as_tap_test 
  
  def test_<%= const.basename %>
    g = <%= const.name %>.new.extend Preview
    
    # check the files and directories
    assert_equal %w{
      <%= const.const_name.underscore %>_file.txt
    }, g.process
    
    # check the content as necessary
    assert_equal %q{
# A sample template file.
key: value
}, "\n" + g.builds['<%= const.const_name.underscore %>_file.txt']
  end
end