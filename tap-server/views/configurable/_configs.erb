<dl class="configs">
<% configs.each_pair do |key, config| %>
<%  next if config[:type] == :hidden %>
<%  if config.is_nest? %>
<%  value = values[key.to_s] %>
  <dt class="name"><%= key %></dt>
  <dd class="nested-configs">
<%=   module_render("_configs.erb", obj, :locals => {
        :name => "#{name}[#{key}]",
        :configs => config.default(false).delegates, 
        :values => value
      }) %>
  </dd>
<%  else %>
  <dt><%= key %></dt>
  <dd class="config">
<%  if config_template = module_path("_#{config[:type]}.erb", obj)  %>
<%=   render(
        :file => config_template, 
        :locals => {
          :obj => obj,
          :name => "#{name}[#{key}]",
          :config => config,
          :value => value}) %>
<%  else%>
  <input name="<%= name %>" type="text" value="<%= escape_html(value) %>" />
<%  end %>
  </dd>
<%  end %>
<% end %>
</dl>