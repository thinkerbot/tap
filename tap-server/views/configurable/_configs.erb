<dl class="configs">
<% configurations.each_pair do |key, config| %>
<%  next if config[:type] == :hidden %>
<%  if config.is_nest? %>
  <dt class="name"><%= key %></dt>
  <dd class="nested-configs">
<%=   module_render("_configs.erb", obj, :locals => {
        :id => id,
        :name => "#{name}[#{key}]",
        :configurations => config.default(false).delegates, 
        :values => values[key.to_s]
      }) %>
  </dd>
<%  else %>
  <dt><%= key %></dt>
  <dd class="config">
<%=   render(
        :file => module_path("_#{config[:type]}.erb", obj) || module_path("_config.erb", obj), 
        :locals => {
          :id => "#{id}_config_#{key}",
          :obj => obj,
          :name => "#{name}[#{key}]",
          :config => config,
          :value => values[key.to_s]}) %>
  </dd>
<%  end %>
<% end %>
</dl>