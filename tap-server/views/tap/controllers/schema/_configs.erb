<dl class="configs">
<% configurations.each_pair do |key, config| %>
<%  next if config[:type] == :hidden %>
<%  if config.is_nest? %>
  <dt class="name"><%= key %></dt>
  <dd class="nested-configs">
<%=   render("_configs.erb", :locals => {
        :id => id,
        :name => "#{name}[#{key}]",
        :configurations => config.default(false).delegates, 
        :values => values[key.to_s]
      }) %>
  </dd>
<%  else %>
  <dt><%= key %></dt>
  <dd class="config">
<%=   render(
        :file => class_path("_#{config[:type]}.erb") || class_path("_config.erb"), 
        :locals => {
          :id => "#{id}_config_#{key}",
          :name => "#{name}[#{key}]",
          :config => config,
          :value => values[key.to_s]}) %>
  </dd>
<%  end %>
<% end %>
</dl>