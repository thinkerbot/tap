<div id="branding">
  <h1><a href="<%= Tap::WEBSITE %>">Tap (<ins>T</ins>ask <ins>Ap</ins>plication) <%= Tap::VERSION %> </a></h1>
</div>

<div id="content_main">
<dl id="envs" class="manifest">
<% env_keys = server.env.minihash(true) %>
<% server.env.each do |env| %>
<%   root = env.root %>
<%   env_key = env_keys[env] %>
  <dt class="key"><%= env_key %> (<%= root.root %>)</dt>
  <dd class="value">
<%   controllers = env.manifest('controller') %>
<%   unless controllers.empty? %>
    <dl id="controllers" class="manifest">
    <dt class="key">controllers</dt>
    <dd class="value">
      <ol>
<%     controllers.minimap.each do |(key, const)| %>
      <li><a href="<%= escape(key) %>"><%= key %></a> (<a href="<%= help_uri('controller', key) %>"><%= const.require_path %></a>)</li>
<%     end %>
      </ol>
    </dd>
    </dl>
<%   end %>

<%   tasks = env.manifest('task') %>
<%   unless tasks.empty? %>
    <dl id="tasks" class="manifest">
    <dt class="key">tasks</dt>
    <dd class="value">
      <ol>
<%     tasks.minimap.each do |(key, const)| %>
      <li><%= key %> (<a href="<%= help_uri('task', key) %>"><%= const.require_path %></a>)</li>
<%     end %>
      </ol>
    </dd>
    </dl>
<%   end %>
  </dd>
<% end %>
</dl>
</div>
