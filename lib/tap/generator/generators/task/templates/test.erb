require File.join(File.dirname(__FILE__), '<%= '../' * const.nesting_depth %>tap_test_helper.rb') 
require '<%= const.path %>'

class <%= const.name %>Test < Test::Unit::TestCase
  acts_as_tap_test 
  
  def test_<%= const.basename %>
    t = <%= const.name %>.new :key => 'value'

    # run the task with some inputs
    t.enq("one")
    app.run
    
    # check the configuration and outputs
    assert_equal({:key  => 'value'}, t.config)
    assert_audit_equal ExpAudit[[nil, "one"], [t, "one was processed with value"]], app._results(t).first

  end
end